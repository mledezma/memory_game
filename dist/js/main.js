"use strict";var game=function(){function e(){a.forEach(function(e){e.removeEventListener("click",i),e.classList.add("is-deleted")}),a=[],c=!1}function t(){document.getElementById("currentScore").innerText=o,o>d&&(d=o,document.getElementById("maxScore").innerText=d,"undefined"!=typeof Storage?localStorage.setItem("maxScore",d):alert("The local storage is not supported")),s===n.length&&setTimeout(function(){alert("You won")},1e3)}function i(){if(!(a.length>=2||this.isClicked)){var i=this.querySelector(".back");a.push(this),i.style.backgroundImage="url("+(r+n[this.index].src)+")",this.classList.add("is-horizontal-rotated"),this.isClicked=!0,c?e():2===a.length&&(!function(){var i=n[a[0].index],r=n[a[1].index];i.id===r.id?(c=!0,o+=100,s+=2,e(),t()):c=!1}(),setTimeout(function(){a.forEach(function(e){var t=e.querySelector(".back");e.classList.remove("is-horizontal-rotated"),e.isClicked=!1,a=[],setTimeout(function(){t.style.backgroundImage=""},1e3)})},1500))}}var n=[{src:"1.jpg",id:1},{src:"2.jpg",id:2},{src:"3.jpg",id:3},{src:"4.jpg",id:4},{src:"5.jpg",id:5},{src:"6.jpg",id:6},{src:"7.jpg",id:7},{src:"8.jpg",id:8},{src:"9.jpg",id:9},{src:"10.jpg",id:10}],r="img/cards/",o=0,c=!1,s=0,a=[],d=0;return{init:function(){d=function(){if("undefined"!=typeof Storage)return localStorage.getItem("maxScore");alert("The local storage is not supported")}(),document.getElementById("maxScore").innerText=d;var e=document.querySelectorAll(".card");n=(n=function(e){return e.concat(e)}(n)).sort(function(){return.5-Math.random()}),function(e){e.forEach(function(e,t){e.isClicked=!1,e.index=t,e.addEventListener("click",i)})}(e)},serviceWorker:function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("../sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})})}}}();game.serviceWorker(),game.init();