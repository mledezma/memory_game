"use strict";var game=function(){function e(){g.forEach(function(e){e.removeEventListener("click",t),e.classList.add("is-deleted")}),g=[],c=!1}function o(){document.getElementById("currentScore").innerText=r,r>l&&(l=r,document.getElementById("maxScore").innerText=l,"undefined"!=typeof Storage?localStorage.setItem("maxScore",l):alert("The local storage is not supported")),d===n.length&&setTimeout(function(){alert("You won")},1e3)}function t(){if(!(g.length>=2||this.isClicked)){var t=this.querySelector(".back");g.push(this),t.style.backgroundImage="url("+(i+n[this.index].src)+")",this.classList.add("is-horizontal-rotated"),this.isClicked=!0,c?e():2===g.length&&(!function(){var t=n[g[0].index],i=n[g[1].index];if(t.id===i.id)c=!0,r+=100,d+=2,e(),o();else{c=!1;var l=n[g[0].index],s=n[g[1].index];console.log(n),console.log("clicked1",g[0].index),console.log("clicked1",g[1].index),console.log(l.logged),console.log(s.logged),l.logged||s.logged?(r-=50,o()):(l.logged=!0,s.logged=!0)}}(),setTimeout(function(){g.forEach(function(e){var o=e.querySelector(".back");e.classList.remove("is-horizontal-rotated"),e.isClicked=!1,g=[],setTimeout(function(){o.style.backgroundImage=""},1e3)})},1500))}}var n=[{src:"1.jpg",id:1,logged:!1},{src:"2.jpg",id:2,logged:!1},{src:"3.jpg",id:3,logged:!1},{src:"4.jpg",id:4,logged:!1},{src:"5.jpg",id:5,logged:!1},{src:"6.jpg",id:6,logged:!1},{src:"7.jpg",id:7,logged:!1},{src:"8.jpg",id:8,logged:!1},{src:"9.jpg",id:9,logged:!1},{src:"10.jpg",id:10,logged:!1}],i="img/cards/",r=0,c=!1,d=0,g=[],l=0;return{init:function(){l=function(){if("undefined"!=typeof Storage)return localStorage.getItem("maxScore");alert("The local storage is not supported")}(),document.getElementById("maxScore").innerText=l;var e=document.querySelectorAll(".card");n=(n=function(e){return e.concat(e)}(n)).sort(function(){return.5-Math.random()}),function(e){e.forEach(function(e,o){e.isClicked=!1,e.index=o,e.addEventListener("click",t)})}(e)},serviceWorker:function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("../sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})})}}}();game.serviceWorker(),game.init();